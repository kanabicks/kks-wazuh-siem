FROM wazuh/wazuh-dashboard:4.9.0

USER root

# Create default Wazuh API configuration
RUN mkdir -p /usr/share/wazuh-dashboard/data/wazuh/config && \
    cat > /usr/share/wazuh-dashboard/data/wazuh/config/wazuh.yml << 'EOF' && \
hosts:
  - default:
      url: https://wazuh.manager
      port: 55000
      username: wazuh-wui
      password: wazuh-wui
      run_as: false
EOF
    chown -R wazuh-dashboard:wazuh-dashboard /usr/share/wazuh-dashboard/data

USER wazuh-dashboard

CMD ["/entrypoint.sh"]
